<div class="question">
  <h1><%=@question.title %></h1>
  <div class="category-header">
    <%= image_tag(@question.category.image, class: 'category-img') if @question.category.image.attached?%>
    <p>
      <%= link_to @question.category.name, category_questions_path(@question.category), data: { turbo: false } %>
    </p>
  </div>
  <p><%= @question.user.name %></p>
  <p><%= @question.content %></p>
</div>

<h1>Answers</h1>
<% if user_signed_in? %>
  <% unless current_user_answer %>
    <%= turbo_frame_tag 'create_answer' do %>
      <%= render 'answers/form', answer: Answer.new, question: @question %>
    <% end %>
  <% end %>
<% end %>

<div id="answers">
  <% @answers.each do |answer| %>
    <%= turbo_frame_tag(dom_id answer) do %>
      <%= render answer %>
    <% end %>
  <% end %>
</div>
<% if current_user == @question.user %>
  <div>
    <%= link_to "Edit this question", edit_question_path(@question) %> |

    <%= button_to "Destroy this question",@question, method: :delete %>
  </div>
<% end %>